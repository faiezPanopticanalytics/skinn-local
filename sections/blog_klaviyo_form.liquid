<div class="klaviyo_form_blog_section" id="{{section.id}}">
      <form id="blog_email_signup_{{section.settings.klaviyo_list_id}}" class="klaviyo_gdpr_embed_{{section.settings.klaviyo_list_id}}" action="//manage.kmail-lists.com/subscriptions/subscribe" data-ajax-submit="//manage.kmail-lists.com/ajax/subscriptions/subscribe" method="GET" target="_blank" novalidate="novalidate">
          <input type="hidden" name="g" value="{{section.settings.klaviyo_list_id}}">
          <input type="hidden" name="$fields" value="$consent">
          <input type="hidden" name="$list_fields" value="$consent">
          
          <div class="row align-items-center justify-content-center">
              <div class="col-12 col-md-4 text_col">
                  <p class="catch">Catch <span class="fancy-text">The Lab Report<sup>&trade;</sup></span></p>
              </div>
              
              <div class="col-12 col-md-8">
                  <div class="klaviyo_messages">
                      <div class="success_message" style="display:none;"></div>
                      <div class="error_message" style="display:none;"></div>
                  </div>    
                  
                  <div class="klaviyo_field_group">
                      <div class="row">
                          <div class="form-group col-12 col-md-8">
                              <input class="form-control" type="email" value="" name="email" id="k_id_email" placeholder="Email Address" autocomplete="email" required />    
                          </div>
                          <div class="col-12 col-md-4">
                            <button type="submit" class="klaviyo_submit_button btn btn-primary btn-block">Subscribe</button> 
                          </div>
                      </div>
                  </div>  
              </div>
          </div>
      </form>
</div>

<script type="text/javascript" src="//www.klaviyo.com/media/js/public/klaviyo_subscribe.js"></script>
<script type="text/javascript">

KlaviyoSubscribe.attachToForms('#blog_email_signup_{{section.settings.klaviyo_list_id}}', {
  success: function ($form) {
  // `$form` is a jQuery wrapper around the form that was submitted. This makes it easy to get the email address or form fields.
      var email = $form.find('[name="email"]').val();
      _learnq.push(['identify', { $email: email }]);
      _learnq.push(['track', 'Signed Up for Newsletter on Blog Page']);
  }
});
</script>

{% schema %}
  {
    "name": "Klaviyo Blog Form",
    "settings": [{
        "label": "List ID",
        "id": "klaviyo_list_id",
        "type": "text"
    }]
  }
{% endschema %}
